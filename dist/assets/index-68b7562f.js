import{a as m,v as x,R as u,w as g,x as N,S as i,p as w,j as e,y as D,r as P,z as _,c as j,B as A,l as p,D as b,f as v,E as R,T,H as F}from"./index-44f739b3.js";import{a as y}from"./index.esm-1275ca57.js";import{c as L}from"./cartApi-0e2bb2c3.js";import{a as S}from"./index.esm-cea53605.js";import{G as E}from"./index.esm-ccc755b3.js";const q=()=>{const s=m(x),{data:{cart_items:r,price:t}}=u(x);return{handleCreateCartProduct:async()=>{try{s(n=>({...n,status:i.LOADING}));const a={price:t,cart_items:r.map(n=>({product_id:n.product_id,quantity:n.quantity}))},c=await L.createCart(a);s({status:i.HAS_VALUE,message:c.data.message,data:{price:void 0,cart_items:[]}})}catch(a){console.log(a.data),s(c=>({...c,status:i.HAS_ERROR,message:a.data.message}))}}}},O=()=>{const s=m(g),{data:r}=u(N);return{handleFindProductByCategory:async l=>{try{s(c=>({...c,status:i.LOADING})),console.log(l);const a=await w.postFindProductByCategory({categories_id:l,author_id:r.author.author_id});console.log(a.data),s({status:i.HAS_VALUE,message:a.data.message,data:a.data.data})}catch(a){console.log(a),s({status:i.HAS_ERROR,message:a.data,data:[]})}}}},I=()=>{const s=m(x);return{handleAddDetailProductToCart:({product_id:t,title:l,priceProduct:a})=>{s(c=>{let n;if(!c.data.price)return{...c,data:{price:a,cart_items:[{product_id:t,title:l,price:a,quantity:1}]}};const d=c.data.price+a;return c.data.cart_items.find(C=>C.product_id===t)?n=c.data.cart_items.map(f=>f.product_id===t?{...f,quantity:f.quantity+1}:f):n=[...c.data.cart_items,{product_id:t,title:l,price:a,quantity:1}],{...c,data:{...c.data,price:d,cart_items:n}}})}}},M=()=>{const s=m(x);return{handleSubDetailProductToCart:({product_id:t,priceProduct:l})=>{s(a=>{const c=a.data.price-l,d=a.data.cart_items.map(o=>{if(!(o.product_id===t&&o.quantity===1))return o.product_id===t?{...o,quantity:o.quantity-1}:o});return{...a,data:{...a.data,price:c,cart_items:d.filter(o=>o!==void 0)}}})}}},h={useCreateCartProduct:q,useFindProductByCategory:O,useAddDetailProductToCart:I,useSubDetailProductToCart:M},H=()=>{var a,c,n,d,o;const{id:s}=D(),{state:r,contents:t}=P(_(s)),l=m(N);return j.useEffect(()=>{l({status:i.HAS_VALUE,message:t.message,data:t.data})},[r]),e.jsxs("section",{className:`flex pl-4 flex-row space-x-8 h-full w-3/5 justify-between ${r===i.LOADING&&"animate-pulse"}`,children:[e.jsx("div",{className:"w-2/5 flex justify-center items-center h-full rounded-xl",children:e.jsx("img",{className:"w-full h-full object-cover rounded-xl text-white",src:r===i.LOADING?"":((a=t.data)==null?void 0:a.picture)||"asdads",alt:"Something wrong with url"})}),e.jsxs("section",{className:"w-3/5 text-white flex flex-col space-y-8 justify-end py-8",children:[e.jsx("h2",{children:((c=t.data)==null?void 0:c.title)||""}),e.jsx("p",{children:((d=(n=t.data)==null?void 0:n.author)==null?void 0:d.username)||""}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col justify-between justify-center",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(A,{})," 4.5 rating"]}),e.jsx("p",{className:"text-sm",children:"100+ rating"})]}),e.jsxs("div",{className:"flex flex-col border-x-2 border-solid border-white text-center px-6",children:[e.jsx("p",{className:"text-sm",children:"30 Mins"}),e.jsx("p",{className:"text-sm",children:"Delivery Time"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(p,{})," ",((o=t.data)==null?void 0:o.price)||""]}),e.jsx("p",{className:"text-sm",children:"Cost for two"})]})]})]})]})},k=()=>e.jsx("section",{className:"text-white w-2/5 pt-12 pl-12",children:e.jsxs("div",{className:"border-dashed border-2 border-orange-400 h-full rounded-2xl px-8 flex flex-col justify-center space-y-4",children:[e.jsx("h2",{children:"Offers"}),e.jsxs("ul",{className:"flex flex-col space-y-4",children:[e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(y,{size:24,color:"orange"}),e.jsx("p",{children:"50% off up to"}),e.jsx(p,{}),"100 | Use code TRYNEW"]}),e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(y,{size:24,color:"orange"}),e.jsx("p",{children:"20% off| Use code PARTY"})]})]})]})}),B=()=>e.jsx("article",{className:"bg-black h-64 opacity-90",children:e.jsxs("section",{className:"container flex flex-row mx-auto py-4 h-full",children:[e.jsx(H,{}),e.jsx(k,{})]})}),G=s=>{const{open:r=!1}=s,t=j.useRef(null),{status:l,message:a}=u(x),c=m(b);return j.useLayoutEffect(()=>{var n,d;r&&!((n=t.current)!=null&&n.open)?t.current.showModal():!r&&((d=t.current)!=null&&d.open)&&t.current.close()},[r]),e.jsx("dialog",{ref:t,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[l===i.LOADING&&e.jsx(S,{size:60,className:"animate-spin",color:"orange"}),l===i.HAS_VALUE&&e.jsx(E,{size:60,color:"#557C55"}),l===i.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>c(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},U=()=>{const{data:{price:s}}=u(x);return e.jsx("section",{children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h4",{className:"text-2xl font-medium",children:"Subtotal"}),e.jsxs("h4",{className:"inline-flex text-2xl items-center font-medium",children:[e.jsx(p,{}),s]})]})})},z=s=>{const{product_id:r,title:t,price:l,quantity:a}=s,{handleAddDetailProductToCart:c}=h.useAddDetailProductToCart(),{handleSubDetailProductToCart:n}=h.useSubDetailProductToCart();return e.jsx("section",{className:"flex flex-col space-y-4 hover-box border-b-1 border-solid border-gray-400 pb-6 px-4 rounded",children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(p,{})," ",e.jsx("p",{className:"text-gray-400",children:l})]})]}),e.jsxs("div",{className:"inline-flex items-end w-24 justify-between",children:[e.jsx("button",{onClick:()=>{n({product_id:r,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"-"})}),e.jsx("p",{children:a}),e.jsx("button",{onClick:()=>{c({product_id:r,title:t,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"+"})})]})]})})},V=()=>{var r;const{data:{cart_items:s}}=u(x);return e.jsx("section",{className:"flex flex-col space-y-6",children:!!((r=s[0])!=null&&r.title)&&s.map(t=>e.jsx(z,{title:t.title,product_id:t.product_id,quantity:t.quantity,price:t.price},t.product_id))})},Y=()=>{const[s,r]=v(b),{handleCreateCartProduct:t}=h.useCreateCartProduct(),l=R(x);return e.jsxs(e.Fragment,{children:[e.jsx(G,{open:s}),e.jsxs("article",{className:"flex flex-col space-y-10",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"text-2xl",children:"Cart"}),e.jsx("p",{children:"2 items"})]}),e.jsx(V,{}),e.jsx(U,{}),e.jsx("button",{className:"px-8 py-4 bg-orange-500 text-xl font-bold text-white rounded-xl hover-box",onClick:a=>{a.preventDefault(),r(!0),t(),l()},children:"Checkout"})]})]})},K=s=>{const{product_id:r,title:t,picture:l,description:a,price:c}=s,{handleAddDetailProductToCart:n}=h.useAddDetailProductToCart();return e.jsxs("article",{className:"flex flex-row space-x-6 justify-between w-full h-full",children:[e.jsxs("section",{className:"flex flex-col space-y-6",children:[e.jsx("h2",{className:"font-light",children:t}),e.jsxs("p",{className:"inline-flex",children:[e.jsx(p,{}),c]}),e.jsx("p",{className:"text-gray-400 text-base",children:a})]}),e.jsxs("section",{className:" relative w-40 ",children:[e.jsx("img",{className:"h-40 w-40 aspect-square rounded-2xl",src:l||"",alt:"",loading:"Loading..."}),e.jsx("button",{style:{top:"140px",left:32},className:"absolute px-6 py-3 shadow-md rounded-xl bg-white",onClick:d=>{d.preventDefault(),n({product_id:r,title:t,priceProduct:c})},children:e.jsx("p",{className:"text-lg ",style:{color:"green"},children:"Add +"})})]})]})},W=()=>{const{data:s,status:r}=u(g);return console.log(r),e.jsx("article",{children:r==="loading"?e.jsx("div",{className:"w-full flex justify-center items-center py-4",children:e.jsx(T,{color:"#FFA33C",height:50,width:50})}):e.jsx(e.Fragment,{children:s.map(t=>e.jsx(K,{product_id:t.product_id,title:t.title,price:t.price,picture:t.picture,description:t.description},t.product_id))})})},$=s=>{const{name:r,id:t}=s,{handleFindProductByCategory:l}=h.useFindProductByCategory();return e.jsx("p",{onClick:a=>{a.preventDefault(),l(t)},className:"text-gray-500 sidebar-item hover-cursor",children:r})},J=()=>{const{state:s,contents:{data:r}}=P(F);return e.jsx("aside",{className:"flex flex-col space-y-2 items-end pr-12 pt-4 text-base",children:s==="loading"?e.jsx(e.Fragment,{children:e.jsx("p",{children:"Loading..."})}):e.jsx(e.Fragment,{children:r.map(t=>e.jsx($,{id:t.id,name:t.name},t.id))})})},Q=()=>e.jsx("article",{className:"container mx-auto py-16",children:e.jsxs("div",{className:"grid grid-cols-6 gap-x-12",children:[e.jsx("section",{className:"col-span-1 border-r-1 h-full border-solid border-gray-300",children:e.jsx(J,{})}),e.jsx("section",{className:"col-span-3 h-92",children:e.jsx(W,{})}),e.jsx("section",{className:"col-span-2 px-8",children:e.jsx(Y,{})})]})}),ae=()=>{const{status:s,data:r}=u(x);return console.log(r),console.log(s),e.jsxs("main",{className:"mt-28 flex flex-col ",children:[e.jsx(B,{}),e.jsx(Q,{})]})};export{ae as default};
