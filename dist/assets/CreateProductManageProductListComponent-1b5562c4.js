import{x as f,e as N,S as d,y as P,p as C,z as F,a as u,R as n,i as b,B as v,c as p,j as e,D as H,G as R}from"./index-471de8c2.js";import{a as T}from"./index.esm-2a477c1f.js";const l={HO_CHI_MINH:"Thành phố Hồ Chí Minh",HA_NOI:"Thủ đô Hà Nội",HUE:"Cố đô Huế",DA_NANG:"Thành phố Đà Đẵng",BEN_TRE:"Tỉnh Bến Tre",BINH_DINH:"Tỉnh Bình Định",HAI_PHONG:"Thành phố Hải Phòng",NHA_TRANG:"Thành phố Nha Trang",VUNG_TAU:"Thành phố Vũng Tàu"},I=[l.HO_CHI_MINH,l.HA_NOI,l.HUE,l.DA_NANG,l.BEN_TRE,l.BINH_DINH,l.HAI_PHONG,l.NHA_TRANG,l.VUNG_TAU],c=f({key:"createProductFormAtom",default:{state:N.IDLE,data:{title:void 0,description:void 0,location:void 0,price:void 0,picture:void 0,categories_id:void 0}}}),y=f({key:"categoriesAtom",default:{state:N.IDLE,message:void 0,data:[]}}),w=f({key:"openDialogCreateProductAtom",default:!1}),_=f({key:"stateCreateProductAtom",default:{status:d.IDLE,message:void 0}}),S=P({key:"getCategoriesSelector",get:async()=>{const o=await C.getCategories();return console.log(o.data),o.data}}),x=F({key:"createProductFormSelector",get:o=>({get:t})=>t(c).data[o],set:o=>({set:t},s)=>{t(c,a=>({...a,state:N.HAS_VALUE,data:{...a.data,[o]:s}}))}}),E=()=>{const o=u(y),t=n(S);return{handleSetCategories:()=>{o(a=>({...a,message:t.message,data:t.data}))}}},L=()=>{const{data:{title:o,description:t,price:s,location:a,picture:r,categories_id:m}}=n(c),[g,i]=b(_),A=v(c);return{handleSubmitCreateProductForm:p.useCallback(async()=>{if(!o||!t||!s||!a||!r||!m)i({status:d.HAS_ERROR,message:"SomeThing wrong in form"});else try{i({status:d.LOADING,message:void 0});const h=await C.createProduct({title:o,description:t,price:s,location:a,picture:r,categories_id:m});i({status:d.HAS_VALUE,message:h.data.message}),A()}catch(h){console.log(h.data),i({status:d.HAS_ERROR,message:h.data.message})}},[m,t,a,r,s,i,g,o])}},j={useGetCategories:E,useCreateProduct:L},O=()=>{const o=u(x("title")),{data:{title:t}}=n(c);return e.jsxs("section",{className:"flex flex-col w-1/2 space-y-2 ",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Title of Production"}),e.jsx("input",{type:"text",value:t||"",placeholder:"Enter to title of production",onChange:s=>o(s.target.value),className:"w-5/6 py-2 bg-gray-50 border-1 border-solid border-gray-300 rounded-xl px-4"})]})},D=()=>{const{data:o}=n(y),t=u(x("categories_id"));return e.jsxs("section",{className:"flex flex-col w-1/2 mt-0 space-x-4 justify-start  items-start space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-6",children:"Categories"}),e.jsxs("select",{onChange:s=>t(s.target.value),className:" p-2 border-1 w-3/5 border-solid border-gray-300 rounded-xl ",children:[e.jsx("option",{value:"",children:"choose categories"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s))]})]})},U=()=>{const o=u(x("description")),{data:{description:t}}=n(c);return e.jsxs("section",{className:"w-full flex flex-col space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Description"}),e.jsx("textarea",{type:"text",rows:8,value:t||"",onChange:s=>o(s.target.value),placeholder:"Enter to description of production",className:"w-4/5 py-2 bg-white border-1 border-solid border-gray-400 rounded-xl px-4 font-mono"})]})},G=()=>{const o=u(x("picture")),{data:{picture:t}}=n(c),s=a=>{const r=new FileReader;r.readAsDataURL(a.target.files[0]),r.onload=()=>{o(()=>r.result)}};return e.jsxs("section",{className:"flex flex-wrap flex-row items-center space-x-4",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Upload Image"}),e.jsx("label",{htmlFor:"upLoadImageProduction",children:e.jsx(H,{})}),e.jsx("div",{className:"hidden",children:e.jsx("input",{id:"upLoadImageProduction",className:"m-0 ",type:"file",name:"upLoadImageProduction",onChange:s})}),e.jsx("div",{className:"w-full px-8 mt-4  max-h-100 bg-gray-400 flex justify-center items-center border-2 border-solid border-gray-500",children:e.jsx("img",{className:"w-full h-100 object-cover",src:t,alt:"Not have file"})})]})},k=()=>{const o=u(x("location"));return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 ",children:[e.jsx("h4",{className:"text-lg font-light",children:"Location Shop"}),e.jsxs("select",{className:"w-1/5 p-2 border-2 border-solid border-gray-300 rounded-xl grow",onChange:t=>o(t.target.value),children:[e.jsx("option",{value:"",children:"choose city"}),I.map(t=>e.jsx("option",{value:t,children:t},t))]})]})},M=()=>{const o=u(x("price")),{data:{price:t}}=n(c);return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 mx-12",children:[e.jsx("h4",{className:"text-lg font-light",children:"Money"}),e.jsx("input",{placeholder:"Spend",type:"text",value:t||"",onChange:s=>o(s.target.value),className:"grow px-4 py-2 border-solid border-1 border-gray-300 rounded-2xl bg-gray-50"})]})};function B(o){return R({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.28 9.28a.75.75 0 0 0-1.06-1.06l-5.97 5.97-2.47-2.47a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l6.5-6.5Z"}},{tag:"path",attr:{d:"M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"}}]})(o)}const V=o=>{const{open:t=!1}=o,s=p.useRef(null),{status:a,message:r}=n(_),m=u(w);return p.useLayoutEffect(()=>{var g,i;t&&!((g=s.current)!=null&&g.open)?s.current.showModal():!t&&((i=s.current)!=null&&i.open)&&s.current.close()},[t]),e.jsx("dialog",{ref:s,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[a===d.LOADING&&e.jsx(T,{size:60,className:"animate-spin",color:"orange"}),a===d.HAS_VALUE&&e.jsx(B,{size:60,color:"#557C55"}),a===d.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:r})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>m(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},K=()=>{const{handleSetCategories:o}=j.useGetCategories(),{handleSubmitCreateProductForm:t}=j.useCreateProduct(),{data:s}=n(c),[a,r]=b(w);return p.useEffect(()=>{o()},[]),console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(V,{open:a}),e.jsxs("article",{className:"w-full p-8 flex flex-col space-y-6 shadow-lg mt-8",children:[e.jsx("section",{className:"",children:e.jsx("h3",{className:"font-base text-orange-400 border-b-1 py-2 border-solid border-gray-300 mb-4",children:"Create Your Product"})}),e.jsxs("section",{className:"w-full flex flex-row  justify-center items-center",children:[e.jsx(O,{}),e.jsx("div",{className:"border-l-1 border-solid border-gray-300 h-24"}),e.jsx(D,{})]}),e.jsx("section",{className:"w-full flex flex-col space-y-2"}),e.jsx(U,{}),e.jsx(G,{}),e.jsxs("section",{className:"flex flex-row w-full space-x-12 justify-between",children:[e.jsx(k,{}),e.jsx(M,{})]}),e.jsxs("section",{className:"flex flex-row space-x-8 pt-4",children:[e.jsx("button",{className:"grow py-2 text-lg font-bold bg-white border-1 border-solid border-gray-300",children:"Cancel"}),e.jsx("button",{onClick:m=>{m.preventDefault(),t(),r(!0)},className:"grow py-2 text-lg text-white bg-orange-400 font-bold",children:"Save Production"})]})]})]})};export{K as default};
