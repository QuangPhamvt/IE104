import{R as f,S as C,a as u,b as N,P as j,c as T,d as R,e as x,f as d,g as y,h as v,i as h,j as e,F as I,G as H,k as S}from"./index-bbb31fe1.js";const n={HO_CHI_MINH:"Thành phố Hồ Chí Minh",HA_NOI:"Thủ đô Hà Nội",HUE:"Cố đô Huế",DA_NANG:"Thành phố Đà Đẵng",BEN_TRE:"Tỉnh Bến Tre",BINH_DINH:"Tỉnh Bình Định",HAI_PHONG:"Thành phố Hải Phòng",NHA_TRANG:"Thành phố Nha Trang",VUNG_TAU:"Thành phố Vũng Tàu"},E=[n.HO_CHI_MINH,n.HA_NOI,n.HUE,n.DA_NANG,n.BEN_TRE,n.BINH_DINH,n.HAI_PHONG,n.NHA_TRANG,n.VUNG_TAU],i=f({key:"createProductFormAtom",default:{state:C.IDLE,data:{title:void 0,description:void 0,location:void 0,price:void 0,picture:void 0,categories_id:void 0}}}),_=f({key:"categoriesAtom",default:{state:C.IDLE,message:void 0,data:[]}}),w=f({key:"openDialogCreateProductAtom",default:!1}),A=f({key:"stateCreateProductAtom",default:{status:u.IDLE,message:void 0}}),P={getCategories:()=>{const t=j.GET_CATEGORIES;return N.get(t)},createProduct:t=>{const{title:o,description:s,location:r,picture:a,price:l,categories_id:m}=t,c=j.CREATE_PRODUCT;return N.post(c,{title:o,description:s,location:r,picture:a,price:+l,categories_id:m})}},O=T({key:"getCategoriesSelector",get:async()=>{const t=await P.getCategories();return console.log(t.data),t.data}}),g=R({key:"createProductFormSelector",get:t=>({get:o})=>o(i).data[t],set:t=>({set:o},s)=>{o(i,r=>({...r,state:C.HAS_VALUE,data:{...r.data,[t]:s}}))}}),L=()=>{const t=x(_),o=d(O);return{handleSetCategories:()=>{t(r=>({...r,message:o.message,data:o.data}))}}},D=()=>{const{data:{title:t,description:o,price:s,location:r,picture:a,categories_id:l}}=d(i),[m,c]=y(A),F=v(i);return{handleSubmitCreateProductForm:h.useCallback(async()=>{if(!t||!o||!s||!r||!a||!l)c({status:u.HAS_ERROR,message:"SomeThing wrong in form"});else try{c({status:u.LOADING,message:void 0});const p=await P.createProduct({title:t,description:o,price:s,location:r,picture:a,categories_id:l});c({status:u.HAS_VALUE,message:p.data.message}),F()}catch(p){console.log(p.data),c({status:u.HAS_ERROR,message:p.data.message})}},[l,o,r,a,s,c,m,t])}},b={useGetCategories:L,useCreateProduct:D},U=()=>{const t=x(g("title")),{data:{title:o}}=d(i);return e.jsxs("section",{className:"flex flex-col w-1/2 space-y-2 ",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Title of Production"}),e.jsx("input",{type:"text",value:o||"",placeholder:"Enter to title of production",onChange:s=>t(s.target.value),className:"w-5/6 py-2 bg-gray-50 border-1 border-solid border-gray-300 rounded-xl px-4"})]})},G=()=>{const{data:t}=d(_),o=x(g("categories_id"));return e.jsxs("section",{className:"flex flex-col w-1/2 mt-0 space-x-4 justify-start  items-start space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-6",children:"Categories"}),e.jsxs("select",{onChange:s=>o(s.target.value),className:" p-2 border-1 w-3/5 border-solid border-gray-300 rounded-xl ",children:[e.jsx("option",{value:"",children:"choose categories"}),t.map(s=>e.jsx("option",{value:s.id,children:s.name},s))]})]})},k=()=>{const t=x(g("description")),{data:{description:o}}=d(i);return e.jsxs("section",{className:"w-full flex flex-col space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Description"}),e.jsx("textarea",{type:"text",rows:8,value:o||"",onChange:s=>t(s.target.value),placeholder:"Enter to description of production",className:"w-4/5 py-2 bg-white border-1 border-solid border-gray-400 rounded-xl px-4 font-mono"})]})},M=()=>{const t=x(g("picture")),{data:{picture:o}}=d(i),s=r=>{const a=new FileReader;a.readAsDataURL(r.target.files[0]),a.onload=()=>{t(()=>a.result)}};return e.jsxs("section",{className:"flex flex-wrap flex-row items-center space-x-4",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Upload Image"}),e.jsx("label",{htmlFor:"upLoadImageProduction",children:e.jsx(I,{})}),e.jsx("div",{className:"hidden",children:e.jsx("input",{id:"upLoadImageProduction",className:"m-0 ",type:"file",name:"upLoadImageProduction",onChange:s})}),e.jsx("div",{className:"w-full px-8 mt-4  max-h-100 bg-gray-400 flex justify-center items-center border-2 border-solid border-gray-500",children:e.jsx("img",{className:"w-full h-100 object-cover",src:o,alt:"Not have file"})})]})},B=()=>{const t=x(g("location"));return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 ",children:[e.jsx("h4",{className:"text-lg font-light",children:"Location Shop"}),e.jsxs("select",{className:"w-1/5 p-2 border-2 border-solid border-gray-300 rounded-xl grow",onChange:o=>t(o.target.value),children:[e.jsx("option",{value:"",children:"choose city"}),E.map(o=>e.jsx("option",{value:o,children:o},o))]})]})},V=()=>{const t=x(g("price")),{data:{price:o}}=d(i);return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 mx-12",children:[e.jsx("h4",{className:"text-lg font-light",children:"Money"}),e.jsx("input",{placeholder:"Spend",type:"text",value:o||"",onChange:s=>t(s.target.value),className:"grow px-4 py-2 border-solid border-1 border-gray-300 rounded-2xl bg-gray-50"})]})};function Y(t){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.28 9.28a.75.75 0 0 0-1.06-1.06l-5.97 5.97-2.47-2.47a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l6.5-6.5Z"}},{tag:"path",attr:{d:"M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"}}]})(t)}const Z=t=>{const{open:o=!1}=t,s=h.useRef(null),{status:r,message:a}=d(A),l=x(w);return h.useLayoutEffect(()=>{var m,c;o&&!((m=s.current)!=null&&m.open)?s.current.showModal():!o&&((c=s.current)!=null&&c.open)&&s.current.close()},[o]),e.jsx("dialog",{ref:s,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[r===u.LOADING&&e.jsx(S,{size:60,className:"animate-spin",color:"orange"}),r===u.HAS_VALUE&&e.jsx(Y,{size:60,color:"#557C55"}),r===u.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>l(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},q=()=>{const{handleSetCategories:t}=b.useGetCategories(),{handleSubmitCreateProductForm:o}=b.useCreateProduct(),{data:s}=d(i),[r,a]=y(w);return h.useEffect(()=>{t()},[]),console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:r}),e.jsxs("article",{className:"w-full p-8 flex flex-col space-y-6 shadow-lg mt-8",children:[e.jsx("section",{className:"",children:e.jsx("h3",{className:"font-base text-orange-400 border-b-1 py-2 border-solid border-gray-300 mb-4",children:"Create Your Product"})}),e.jsxs("section",{className:"w-full flex flex-row  justify-center items-center",children:[e.jsx(U,{}),e.jsx("div",{className:"border-l-1 border-solid border-gray-300 h-24"}),e.jsx(G,{})]}),e.jsx("section",{className:"w-full flex flex-col space-y-2"}),e.jsx(k,{}),e.jsx(M,{}),e.jsxs("section",{className:"flex flex-row w-full space-x-12 justify-between",children:[e.jsx(B,{}),e.jsx(V,{})]}),e.jsxs("section",{className:"flex flex-row space-x-8 pt-4",children:[e.jsx("button",{className:"grow py-2 text-lg font-bold bg-white border-1 border-solid border-gray-300",children:"Cancel"}),e.jsx("button",{onClick:l=>{l.preventDefault(),o(),a(!0)},className:"grow py-2 text-lg text-white bg-orange-400 font-bold",children:"Save Production"})]})]})]})};export{q as default};
