import{a as m,V as x,R as u,W as g,X as N,S as i,p as D,j as e,Y as _,Q as b,Z as A,c as j,_ as v,$ as P,m as w,a0 as R,U as T,a1 as E,a2 as S,J as F}from"./index-36f80f1e.js";import{G as p}from"./index.esm-c7af478e.js";import{a as C}from"./index.esm-fa8986f2.js";import{c as L}from"./cartApi-c750177b.js";import{a as O}from"./index.esm-1ee2fe6d.js";import{G as I}from"./index.esm-7fb5b1d0.js";const q=()=>{const s=m(x),{data:{cart_items:r,price:t}}=u(x);return{handleCreateCartProduct:async()=>{try{s(o=>({...o,status:i.LOADING}));const a={price:t,cart_items:r.map(o=>({product_id:o.product_id,quantity:o.quantity}))},c=await L.createCart(a);s({status:i.HAS_VALUE,message:c.data.message,data:{price:void 0,cart_items:[]}})}catch(a){console.log(a.data),s(c=>({...c,status:i.HAS_ERROR,message:a.data.message}))}}}},M=()=>{const s=m(g),{data:r}=u(N);return{handleFindProductByCategory:async l=>{try{s(c=>({...c,status:i.LOADING})),console.log(l);const a=await D.postFindProductByCategory({categories_id:l,author_id:r.author.author_id});console.log(a.data),s({status:i.HAS_VALUE,message:a.data.message,data:a.data.data})}catch(a){console.log(a),s({status:i.HAS_ERROR,message:a.data,data:[]})}}}},H=()=>{const s=m(x);return{handleAddDetailProductToCart:({product_id:t,title:l,priceProduct:a})=>{s(c=>{let o;if(!c.data.price)return{...c,data:{price:a,cart_items:[{product_id:t,title:l,price:a,quantity:1}]}};const d=c.data.price+a;return c.data.cart_items.find(y=>y.product_id===t)?o=c.data.cart_items.map(f=>f.product_id===t?{...f,quantity:f.quantity+1}:f):o=[...c.data.cart_items,{product_id:t,title:l,price:a,quantity:1}],{...c,data:{...c.data,price:d,cart_items:o}}})}}},k=()=>{const s=m(x);return{handleSubDetailProductToCart:({product_id:t,priceProduct:l})=>{s(a=>{const c=a.data.price-l,d=a.data.cart_items.map(n=>{if(!(n.product_id===t&&n.quantity===1))return n.product_id===t?{...n,quantity:n.quantity-1}:n});return{...a,data:{...a.data,price:c,cart_items:d.filter(n=>n!==void 0)}}})}}},h={useCreateCartProduct:q,useFindProductByCategory:M,useAddDetailProductToCart:H,useSubDetailProductToCart:k},B=()=>{var a,c,o,d,n;const{id:s}=_(),{state:r,contents:t}=b(A(s)),l=m(N);return j.useEffect(()=>{l({status:i.HAS_VALUE,message:t.message,data:t.data})},[r]),e.jsxs("section",{className:`flex pl-4 flex-row space-x-8 h-full w-3/5 justify-between ${r===i.LOADING&&"animate-pulse"}`,children:[e.jsx("div",{className:"w-2/5 flex justify-center items-center h-full rounded-xl",children:e.jsx("img",{className:"w-full h-full object-cover rounded-xl text-white",src:r===i.LOADING?"":((a=t.data)==null?void 0:a.picture)||"asdads",alt:"Something wrong with url"})}),e.jsxs("section",{className:"w-3/5 text-white flex flex-col space-y-8 justify-end py-8",children:[e.jsx("h2",{children:((c=t.data)==null?void 0:c.title)||""}),e.jsx("p",{children:((d=(o=t.data)==null?void 0:o.author)==null?void 0:d.username)||""}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col justify-between justify-center",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(v,{})," 4.5 rating"]}),e.jsx("p",{className:"text-sm",children:"100+ rating"})]}),e.jsxs("div",{className:"flex flex-col border-x-2 border-solid border-white text-center px-6",children:[e.jsx("p",{className:"text-sm",children:"30 Mins"}),e.jsx("p",{className:"text-sm",children:"Delivery Time"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(p,{})," ",((n=t.data)==null?void 0:n.price)||""]}),e.jsx("p",{className:"text-sm",children:"Cost for two"})]})]})]})]})},G=()=>e.jsx("section",{className:"text-white w-2/5 pt-12 pl-12",children:e.jsxs("div",{className:"border-dashed border-2 border-orange-400 h-full rounded-2xl px-8 flex flex-col justify-center space-y-4",children:[e.jsx("h2",{children:"Offers"}),e.jsxs("ul",{className:"flex flex-col space-y-4",children:[e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(C,{size:24,color:"orange"}),e.jsx("p",{children:"50% off up to"}),e.jsx(p,{}),"100 | Use code TRYNEW"]}),e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(C,{size:24,color:"orange"}),e.jsx("p",{children:"20% off| Use code PARTY"})]})]})]})}),U=()=>e.jsx("article",{className:"bg-black h-64 opacity-90",children:e.jsxs("section",{className:"container flex flex-row mx-auto py-4 h-full",children:[e.jsx(B,{}),e.jsx(G,{})]})}),V=s=>{const{open:r=!1}=s,t=j.useRef(null),{status:l,message:a}=u(x),c=m(P);return j.useLayoutEffect(()=>{var o,d;r&&!((o=t.current)!=null&&o.open)?t.current.showModal():!r&&((d=t.current)!=null&&d.open)&&t.current.close()},[r]),e.jsx("dialog",{ref:t,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[l===i.LOADING&&e.jsx(O,{size:60,className:"animate-spin",color:"orange"}),l===i.HAS_VALUE&&e.jsx(I,{size:60,color:"#557C55"}),l===i.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>c(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},z=()=>{const{data:{price:s}}=u(x);return e.jsx("section",{children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h4",{className:"text-2xl font-medium",children:"Subtotal"}),e.jsxs("h4",{className:"inline-flex text-2xl items-center font-medium",children:[e.jsx(p,{}),s]})]})})},Y=s=>{const{product_id:r,title:t,price:l,quantity:a}=s,{handleAddDetailProductToCart:c}=h.useAddDetailProductToCart(),{handleSubDetailProductToCart:o}=h.useSubDetailProductToCart();return e.jsx("section",{className:"flex flex-col space-y-4 hover-box border-b-1 border-solid border-gray-400 pb-6 px-4 rounded",children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(p,{})," ",e.jsx("p",{className:"text-gray-400",children:l})]})]}),e.jsxs("div",{className:"inline-flex items-end w-24 justify-between",children:[e.jsx("button",{onClick:()=>{o({product_id:r,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"-"})}),e.jsx("p",{children:a}),e.jsx("button",{onClick:()=>{c({product_id:r,title:t,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"+"})})]})]})})},$=()=>{var r;const{data:{cart_items:s}}=u(x);return e.jsx("section",{className:"flex flex-col space-y-6",children:!!((r=s[0])!=null&&r.title)&&s.map(t=>e.jsx(Y,{title:t.title,product_id:t.product_id,quantity:t.quantity,price:t.price},t.product_id))})},W=()=>{const[s,r]=w(P),{handleCreateCartProduct:t}=h.useCreateCartProduct(),l=R(x);return e.jsxs(e.Fragment,{children:[e.jsx(V,{open:s}),e.jsxs("article",{className:"flex flex-col space-y-10 ",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"text-2xl",children:"Cart"}),e.jsx("p",{children:"2 items"})]}),e.jsx($,{}),e.jsx(z,{}),e.jsx("button",{className:"px-8 py-4 bg-orange-500 text-xl font-bold text-white rounded-xl hover-box",onClick:a=>{a.preventDefault(),r(!0),t(),l()},children:"Checkout"})]})]})},J=s=>{const{product_id:r,title:t,picture:l,description:a,price:c}=s,{handleAddDetailProductToCart:o}=h.useAddDetailProductToCart();return e.jsxs("article",{className:"flex flex-row space-x-6 justify-between items-center w-full h-full p-4 shadow border-1 border-solid border-gray-200 rounded-xl",children:[e.jsxs("section",{className:"flex flex-col space-y-2 h-full justify-center ",children:[e.jsx("h2",{className:"font-light",children:t}),e.jsxs("p",{className:"inline-flex",children:[e.jsx(p,{}),c]}),e.jsx("p",{className:"text-gray-400 text-base",children:a})]}),e.jsxs("section",{className:" relative w-40 ",children:[e.jsx("img",{className:"h-32 w-32 aspect-square rounded-2xl border-1 border-solid border-gray-100",src:l||"",alt:"",loading:"Loading..."}),e.jsx("button",{style:{top:"100px",left:18},className:"absolute px-6 py-3 shadow-md rounded-xl bg-white",onClick:d=>{d.preventDefault(),o({product_id:r,title:t,priceProduct:c})},children:e.jsx("p",{className:"text-lg ",style:{color:"green"},children:"Add +"})})]})]})},K=()=>{const{data:s,status:r}=u(g);return console.log(r),e.jsx("article",{children:r==="loading"?e.jsx("div",{className:"w-full flex justify-center items-center py-4 ",children:e.jsx(T,{color:"#FFA33C",height:50,width:50})}):e.jsx("div",{className:"flex-col flex space-y-4",children:s.map(t=>e.jsx(J,{product_id:t.product_id,title:t.title,price:t.price,picture:t.picture,description:t.description},t.product_id))})})},Q=s=>{const{name:r,id:t}=s,{handleFindProductByCategory:l}=h.useFindProductByCategory(),[a,c]=w(S);return e.jsx("p",{onClick:o=>{o.preventDefault(),l(t),c(t)},className:"text-gray-500 sidebar-item hover-cursor",style:{color:`${a===t?"orange":"rgb(107, 114, 128)"}`},children:r})},X=()=>{const{state:s,contents:{data:r}}=b(E);return e.jsx("aside",{className:"flex flex-col items-end pt-4 pr-12 space-y-2 text-base",children:s==="loading"?e.jsx(e.Fragment,{children:e.jsx("p",{children:"Loading..."})}):e.jsx(e.Fragment,{children:r.map(t=>e.jsx(Q,{id:t.id,name:t.name},t.id))})})},Z=()=>e.jsx("article",{className:"container mx-auto py-16",children:e.jsxs("div",{className:"grid grid-cols-6 gap-x-12",children:[e.jsx("section",{className:"col-span-1 border-r-1 h-full border-solid border-gray-300",children:e.jsx(X,{})}),e.jsx("section",{className:"col-span-3 h-92",children:e.jsx(K,{})}),e.jsx("section",{className:"col-span-2 px-8 shadow pt-4 pb-8 rounded-xl",children:e.jsx(W,{})})]})}),le=()=>{const{status:s,data:r}=u(x);return console.log(r),console.log(s),e.jsxs("main",{style:{height:"1280px"},className:"mt-28 flex flex-col",children:[e.jsxs(F,{children:[e.jsx("meta",{charSet:"urf-8"}),e.jsx("title",{children:"IE104 FRONT END | DETAIL POST"})]}),e.jsx(U,{}),e.jsx(Z,{})]})};export{le as default};
