import{a as m,v as x,R as u,w as g,x as N,S as i,p as D,j as e,y as w,r as P,z as _,c as j,B as A,l as h,D as b,f as v,E as R,H as T}from"./index-19b9cc5a.js";import{a as y}from"./index.esm-95c22355.js";import{c as L}from"./cartApi-df394c9a.js";import{a as S}from"./index.esm-a820593a.js";import{G as E}from"./index.esm-11b05df9.js";const F=()=>{const r=m(x),{data:{cart_items:s,price:t}}=u(x);return{handleCreateCartProduct:async()=>{try{r(l=>({...l,status:i.LOADING}));const a={price:t,cart_items:s.map(l=>({product_id:l.product_id,quantity:l.quantity}))},c=await L.createCart(a);r({status:i.HAS_VALUE,message:c.data.message,data:{price:void 0,cart_items:[]}})}catch(a){console.log(a.data),r(c=>({...c,status:i.HAS_ERROR,message:a.data.message}))}}}},q=()=>{const r=m(g),{data:s}=u(N);return{handleFindProductByCategory:async n=>{try{r(c=>({...c,status:i.LOADING})),console.log(n);const a=await D.postFindProductByCategory({categories_id:n,author_id:s.author.author_id});console.log(a.data),r({status:i.HAS_VALUE,message:a.data.message,data:a.data.data})}catch(a){console.log(a),r({status:i.HAS_ERROR,message:a.data,data:[]})}}}},O=()=>{const r=m(x);return{handleAddDetailProductToCart:({product_id:t,title:n,priceProduct:a})=>{r(c=>{let l;if(!c.data.price)return{...c,data:{price:a,cart_items:[{product_id:t,title:n,price:a,quantity:1}]}};const d=c.data.price+a;return c.data.cart_items.find(C=>C.product_id===t)?l=c.data.cart_items.map(f=>f.product_id===t?{...f,quantity:f.quantity+1}:f):l=[...c.data.cart_items,{product_id:t,title:n,price:a,quantity:1}],{...c,data:{...c.data,price:d,cart_items:l}}})}}},I=()=>{const r=m(x);return{handleSubDetailProductToCart:({product_id:t,priceProduct:n})=>{r(a=>{const c=a.data.price-n,d=a.data.cart_items.map(o=>{if(!(o.product_id===t&&o.quantity===1))return o.product_id===t?{...o,quantity:o.quantity-1}:o});return{...a,data:{...a.data,price:c,cart_items:d.filter(o=>o!==void 0)}}})}}},p={useCreateCartProduct:F,useFindProductByCategory:q,useAddDetailProductToCart:O,useSubDetailProductToCart:I},M=()=>{var a,c,l,d,o;const{id:r}=w(),{state:s,contents:t}=P(_(r)),n=m(N);return j.useEffect(()=>{n({status:i.HAS_VALUE,message:t.message,data:t.data})},[s]),e.jsxs("section",{className:`flex pl-4 flex-row space-x-8 h-full w-3/5 justify-between ${s===i.LOADING&&"animate-pulse"}`,children:[e.jsx("div",{className:"w-2/5 flex justify-center items-center h-full rounded-xl",children:e.jsx("img",{className:"w-full h-full object-cover rounded-xl text-white",src:s===i.LOADING?"":((a=t.data)==null?void 0:a.picture)||"asdads",alt:"Something wrong with url"})}),e.jsxs("section",{className:"w-3/5 text-white flex flex-col space-y-8 justify-end py-8",children:[e.jsx("h2",{children:((c=t.data)==null?void 0:c.title)||""}),e.jsx("p",{children:((d=(l=t.data)==null?void 0:l.author)==null?void 0:d.username)||""}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col justify-between justify-center",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(A,{})," 4.5 rating"]}),e.jsx("p",{className:"text-sm",children:"100+ rating"})]}),e.jsxs("div",{className:"flex flex-col border-x-2 border-solid border-white text-center px-6",children:[e.jsx("p",{className:"text-sm",children:"30 Mins"}),e.jsx("p",{className:"text-sm",children:"Delivery Time"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(h,{})," ",((o=t.data)==null?void 0:o.price)||""]}),e.jsx("p",{className:"text-sm",children:"Cost for two"})]})]})]})]})},H=()=>e.jsx("section",{className:"text-white w-2/5 pt-12 pl-12",children:e.jsxs("div",{className:"border-dashed border-2 border-orange-400 h-full rounded-2xl px-8 flex flex-col justify-center space-y-4",children:[e.jsx("h2",{children:"Offers"}),e.jsxs("ul",{className:"flex flex-col space-y-4",children:[e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(y,{size:24,color:"orange"}),e.jsx("p",{children:"50% off up to"}),e.jsx(h,{}),"100 | Use code TRYNEW"]}),e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(y,{size:24,color:"orange"}),e.jsx("p",{children:"20% off| Use code PARTY"})]})]})]})}),k=()=>e.jsx("article",{className:"bg-black h-64 opacity-90",children:e.jsxs("section",{className:"container flex flex-row mx-auto py-4 h-full",children:[e.jsx(M,{}),e.jsx(H,{})]})}),B=r=>{const{open:s=!1}=r,t=j.useRef(null),{status:n,message:a}=u(x),c=m(b);return j.useLayoutEffect(()=>{var l,d;s&&!((l=t.current)!=null&&l.open)?t.current.showModal():!s&&((d=t.current)!=null&&d.open)&&t.current.close()},[s]),e.jsx("dialog",{ref:t,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[n===i.LOADING&&e.jsx(S,{size:60,className:"animate-spin",color:"orange"}),n===i.HAS_VALUE&&e.jsx(E,{size:60,color:"#557C55"}),n===i.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>c(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},G=()=>{const{data:{price:r}}=u(x);return e.jsx("section",{children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h4",{className:"text-2xl font-medium",children:"Subtotal"}),e.jsxs("h4",{className:"inline-flex text-2xl items-center font-medium",children:[e.jsx(h,{}),r]})]})})},U=r=>{const{product_id:s,title:t,price:n,quantity:a}=r,{handleAddDetailProductToCart:c}=p.useAddDetailProductToCart(),{handleSubDetailProductToCart:l}=p.useSubDetailProductToCart();return e.jsx("section",{className:"flex flex-col space-y-4 hover-box border-b-1 border-solid border-gray-400 pb-6 px-4 rounded",children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(h,{})," ",e.jsx("p",{className:"text-gray-400",children:n})]})]}),e.jsxs("div",{className:"inline-flex items-end w-24 justify-between",children:[e.jsx("button",{onClick:()=>{l({product_id:s,priceProduct:n})},className:"px-4 ",children:e.jsx("p",{children:"-"})}),e.jsx("p",{children:a}),e.jsx("button",{onClick:()=>{c({product_id:s,title:t,priceProduct:n})},className:"px-4 ",children:e.jsx("p",{children:"+"})})]})]})})},z=()=>{const{data:{cart_items:r}}=u(x);return e.jsx("section",{className:"flex flex-col space-y-6",children:r.map(s=>e.jsx(U,{title:s.title,product_id:s.product_id,quantity:s.quantity,price:s.price},s.product_id))})},V=()=>{const[r,s]=v(b),{handleCreateCartProduct:t}=p.useCreateCartProduct(),n=R(x);return e.jsxs(e.Fragment,{children:[e.jsx(B,{open:r}),e.jsxs("article",{className:"flex flex-col space-y-10",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"text-2xl",children:"Cart"}),e.jsx("p",{children:"2 items"})]}),e.jsx(z,{}),e.jsx(G,{}),e.jsx("button",{className:"px-8 py-4 bg-orange-500 text-xl font-bold text-white rounded-xl hover-box",onClick:a=>{a.preventDefault(),s(!0),t(),n()},children:"Checkout"})]})]})},Y=r=>{const{product_id:s,title:t,picture:n,description:a,price:c}=r,{handleAddDetailProductToCart:l}=p.useAddDetailProductToCart();return e.jsxs("article",{className:"flex flex-row space-x-6 justify-between w-full h-full",children:[e.jsxs("section",{className:"flex flex-col space-y-6",children:[e.jsx("h2",{className:"font-light",children:t}),e.jsxs("p",{className:"inline-flex",children:[e.jsx(h,{}),c]}),e.jsx("p",{className:"text-gray-400 text-base",children:a})]}),e.jsxs("section",{className:" relative w-40 ",children:[e.jsx("img",{className:"h-40 w-40 aspect-square rounded-2xl",src:n||"",alt:"",loading:"Loading..."}),e.jsx("button",{style:{top:"140px",left:32},className:"absolute px-6 py-3 shadow-md rounded-xl bg-white",onClick:d=>{d.preventDefault(),l({product_id:s,title:t,priceProduct:c})},children:e.jsx("p",{className:"text-lg ",style:{color:"green"},children:"Add +"})})]})]})},K=()=>{const{data:r,status:s}=u(g);return console.log(s),e.jsx("article",{children:r.map(t=>e.jsx(e.Fragment,{children:e.jsx(Y,{product_id:t.product_id,title:t.title,price:t.price,picture:t.picture,description:t.description})}))})},W=r=>{const{name:s,id:t}=r,{handleFindProductByCategory:n}=p.useFindProductByCategory();return e.jsx("p",{onClick:a=>{a.preventDefault(),n(t)},className:"text-gray-500 sidebar-item hover-cursor",children:s})},$=()=>{const{state:r,contents:{data:s}}=P(T);return e.jsx("aside",{className:"flex flex-col space-y-2 items-end pr-12 pt-4 text-base",children:r==="loading"?e.jsx(e.Fragment,{children:e.jsx("p",{children:"Loading..."})}):e.jsx(e.Fragment,{children:s.map(t=>e.jsx(W,{id:t.id,name:t.name},t.id))})})},J=()=>e.jsx("article",{className:"container mx-auto py-16",children:e.jsxs("div",{className:"grid grid-cols-6 gap-x-12",children:[e.jsx("section",{className:"col-span-1 border-r-1 h-full border-solid border-gray-300",children:e.jsx($,{})}),e.jsx("section",{className:"col-span-3 h-92",children:e.jsx(K,{})}),e.jsx("section",{className:"col-span-2 px-8",children:e.jsx(V,{})})]})}),se=()=>{const{status:r,data:s}=u(x);return console.log(s),console.log(r),e.jsxs("main",{className:"mt-28 flex flex-col ",children:[e.jsx(k,{}),e.jsx(J,{})]})};export{se as default};
