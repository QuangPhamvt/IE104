import{a as i,R as n,f as N,E as y,c as g,S as u,p as _,j as e,U as P}from"./index-19b9cc5a.js";import"./dayjs.min-f8b12c66.js";import{c as j,g as A,a as m,s as C,b as x,o as b}from"./selector-c6a3d795.js";import{a as F}from"./index.esm-a820593a.js";import{G as H}from"./index.esm-11b05df9.js";const l={HO_CHI_MINH:"Thành phố Hồ Chí Minh",HA_NOI:"Thủ đô Hà Nội",HUE:"Cố đô Huế",DA_NANG:"Thành phố Đà Đẵng",BEN_TRE:"Tỉnh Bến Tre",BINH_DINH:"Tỉnh Bình Định",HAI_PHONG:"Thành phố Hải Phòng",NHA_TRANG:"Thành phố Nha Trang",VUNG_TAU:"Thành phố Vũng Tàu"},T=[l.HO_CHI_MINH,l.HA_NOI,l.HUE,l.DA_NANG,l.BEN_TRE,l.BINH_DINH,l.HAI_PHONG,l.NHA_TRANG,l.VUNG_TAU],R=()=>{const o=i(j),t=n(A);return{handleSetCategories:()=>{o(r=>({...r,message:t.message,data:t.data}))}}},I=()=>{const{data:{title:o,description:t,price:s,location:r,picture:a,categories_id:d}}=n(m),[h,c]=N(C),w=y(m);return{handleSubmitCreateProductForm:g.useCallback(async()=>{if(!o||!t||!s||!r||!a||!d)c({status:u.HAS_ERROR,message:"SomeThing wrong in form"});else try{c({status:u.LOADING,message:void 0});const p=await _.createProduct({title:o,description:t,price:s,location:r,picture:a,categories_id:d});c({status:u.HAS_VALUE,message:p.data.message}),w()}catch(p){console.log(p.data),c({status:u.HAS_ERROR,message:p.data.message})}},[d,t,r,a,s,c,h,o])}},f={useGetCategories:R,useCreateProduct:I},S=()=>{const o=i(x("title")),{data:{title:t}}=n(m);return e.jsxs("section",{className:"flex flex-col w-1/2 space-y-2 ",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Title of Production"}),e.jsx("input",{type:"text",value:t||"",placeholder:"Enter to title of production",onChange:s=>o(s.target.value),className:"w-5/6 py-2 bg-gray-50 border-1 border-solid border-gray-300 rounded-xl px-4"})]})},v=()=>{const{data:o}=n(j),t=i(x("categories_id"));return e.jsxs("section",{className:"flex flex-col w-1/2 mt-0 space-x-4 justify-start  items-start space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-6",children:"Categories"}),e.jsxs("select",{onChange:s=>t(s.target.value),className:" p-2 border-1 w-3/5 border-solid border-gray-300 rounded-xl ",children:[e.jsx("option",{value:"",children:"choose categories"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s))]})]})},O=()=>{const o=i(x("description")),{data:{description:t}}=n(m);return e.jsxs("section",{className:"w-full flex flex-col space-y-2",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Description"}),e.jsx("textarea",{type:"text",rows:8,value:t||"",onChange:s=>o(s.target.value),placeholder:"Enter to description of production",className:"w-4/5 py-2 bg-white border-1 border-solid border-gray-400 rounded-xl px-4 font-mono"})]})},E=()=>{const o=i(x("picture")),{data:{picture:t}}=n(m),s=r=>{const a=new FileReader;a.readAsDataURL(r.target.files[0]),a.onload=()=>{o(()=>a.result)}};return e.jsxs("section",{className:"flex flex-wrap flex-row items-center space-x-4",children:[e.jsx("h4",{className:"text-lg font-light ml-2",children:"Upload Image"}),e.jsx("label",{htmlFor:"upLoadImageProduction",children:e.jsx(P,{})}),e.jsx("div",{className:"hidden",children:e.jsx("input",{id:"upLoadImageProduction",className:"m-0 ",type:"file",name:"upLoadImageProduction",onChange:s})}),e.jsx("div",{className:"w-full px-8 mt-4  max-h-100 bg-gray-400 flex justify-center items-center border-2 border-solid border-gray-500",children:e.jsx("img",{className:"w-full h-100 object-cover",src:t,alt:"Not have file"})})]})},L=()=>{const o=i(x("location"));return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 ",children:[e.jsx("h4",{className:"text-lg font-light",children:"Location Shop"}),e.jsxs("select",{className:"w-1/5 p-2 border-2 border-solid border-gray-300 rounded-xl grow",onChange:t=>o(t.target.value),children:[e.jsx("option",{value:"",children:"choose city"}),T.map(t=>e.jsx("option",{value:t,children:t},t))]})]})},U=()=>{const o=i(x("price")),{data:{price:t}}=n(m);return e.jsxs("section",{className:"flex flex-wrap flex-row space-x-2 items-center w-2/5 mx-12",children:[e.jsx("h4",{className:"text-lg font-light",children:"Money"}),e.jsx("input",{placeholder:"Spend",type:"text",value:t||"",onChange:s=>o(s.target.value),className:"grow px-4 py-2 border-solid border-1 border-gray-300 rounded-2xl bg-gray-50"})]})},G=o=>{const{open:t=!1}=o,s=g.useRef(null),{status:r,message:a}=n(C),d=i(b);return g.useLayoutEffect(()=>{var h,c;t&&!((h=s.current)!=null&&h.open)?s.current.showModal():!t&&((c=s.current)!=null&&c.open)&&s.current.close()},[t]),e.jsx("dialog",{ref:s,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[r===u.LOADING&&e.jsx(F,{size:60,className:"animate-spin",color:"orange"}),r===u.HAS_VALUE&&e.jsx(H,{size:60,color:"#557C55"}),r===u.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>d(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},z=()=>{const{handleSetCategories:o}=f.useGetCategories(),{handleSubmitCreateProductForm:t}=f.useCreateProduct(),{data:s}=n(m),[r,a]=N(b);return g.useEffect(()=>{o()},[]),console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(G,{open:r}),e.jsxs("article",{className:"w-full p-8 flex flex-col space-y-6 shadow-lg mt-8",children:[e.jsx("section",{className:"",children:e.jsx("h3",{className:"font-base text-orange-400 border-b-1 py-2 border-solid border-gray-300 mb-4",children:"Create Your Product"})}),e.jsxs("section",{className:"w-full flex flex-row  justify-center items-center",children:[e.jsx(S,{}),e.jsx("div",{className:"border-l-1 border-solid border-gray-300 h-24"}),e.jsx(v,{})]}),e.jsx("section",{className:"w-full flex flex-col space-y-2"}),e.jsx(O,{}),e.jsx(E,{}),e.jsxs("section",{className:"flex flex-row w-full space-x-12 justify-between",children:[e.jsx(L,{}),e.jsx(U,{})]}),e.jsxs("section",{className:"flex flex-row space-x-8 pt-4",children:[e.jsx("button",{className:"grow py-2 text-lg font-bold bg-white border-1 border-solid border-gray-300",children:"Cancel"}),e.jsx("button",{onClick:d=>{d.preventDefault(),t(),a(!0)},className:"grow py-2 text-lg text-white bg-orange-400 font-bold",children:"Save Production"})]})]})]})};export{z as default};
