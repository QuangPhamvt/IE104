import{j as e,R as x,d as m,I as d,G as p,a as j,L as u,S as c,M as f,Q as y,l as N,y as g,r as C,T as w}from"./index-19b9cc5a.js";const b=()=>e.jsx("article",{className:"mt-4 p-4 border-b-1 border-solid border-gray-600",children:e.jsx("h2",{className:"font-semibold",children:"Secure Checkout"})}),S=()=>{const s=x(m),{data:{province:a,district:t,ward:r}}=s;return e.jsxs("section",{className:"flex flex-col space-y-8",children:[e.jsxs("h2",{className:"inline-flex space-x-2",children:[e.jsx(d,{size:28,color:"orange"}),e.jsx("p",{className:"font-semibold",children:"Delivery Address"})]}),e.jsxs("section",{className:"p-4 h-32 bg-orange-500 opacity-95 w-2/5 border-1 border-solid rounded-2xl flex flex-col justify-around ",children:[e.jsx(d,{size:28,color:"white"}),e.jsx("p",{className:"text-white font-normal",children:`${a}, ${t}, ${r}`})]})]})},_=s=>{const{qr:a}=s;return a?e.jsx("section",{className:"flex flex-col space-y-8",children:e.jsxs("h2",{className:"inline-flex space-y-4 flex-col",children:[e.jsx("p",{className:"font-semibold",children:"QR Code to payment"}),e.jsx("div",{className:"w-64 aspect-square border-1 border-solid border-black rounded overflow-hidden",children:e.jsx("img",{className:"w-full aspect-square ",src:a.qrDataURL,alt:""})})]})}):null},v=s=>{const{qr:a}=s;return e.jsxs("section",{className:"flex flex-col col-span-2 space-y-8",children:[e.jsx(S,{}),e.jsx(_,{qr:a})]})};function A(s){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20.13 5.41L18.72 4l-9.19 9.19-4.25-4.24-1.41 1.41 5.66 5.66zM5 18h14v2H5z"}}]})(s)}const P=()=>{const s=j(u);return{handlePostCreateOrder:async({seller_id:t,cart_id:r,price:o,cart_items:i=[]})=>{const l=i.map(n=>({product_id:n.product.product_id,quantity:n.quantity}));console.log({seller_id:t,cart_id:r,price:o,products:l});try{s({status:c.LOADING,message:void 0});const n=await f.postCreateOrder({seller_id:t,cart_id:r,price:o,products:l});s({status:c.HAS_VALUE,message:n.data.message})}catch(n){console.error(n.response),s({status:c.HAS_ERROR,message:n})}}}},k={usePostCreateOrder:P},L=s=>{const{price:a,title:t,quantity:r}=s;return e.jsxs("section",{className:"flex flex-col space-y-2 ",children:[e.jsxs("h4",{className:"inline-flex font-light",children:["from ",e.jsx("p",{className:"text-orange-500 ml-2",children:" Lunch Box"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-light",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(N,{})," ",e.jsx("p",{className:"text-gray-400",children:a})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-50 w-24 justify-between",children:[e.jsx("button",{className:"px-4 bg-gray-50",children:" - "}),e.jsx("p",{children:r}),e.jsx("button",{className:"px-4 bg-gray-50",children:" + "})]})]})]})},O=s=>{const{cart_items:a}=s;return e.jsx("section",{className:"flex flex-col space-y-8",children:a.map(t=>e.jsx(L,{price:t.product.price,title:t.product.title,quantity:t.quantity},t.product.product_id))})},D=s=>{const{price:a}=s;return e.jsxs("section",{className:"flex flex-col space-y-4 font-thin",children:[e.jsx("h4",{className:"font-light text-gray-400",children:"Bill details"}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:"Items Total"}),e.jsxs("p",{children:["$",a]})]}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx("p",{children:"0"})]}),e.jsxs("div",{className:"inline-flex w-full flex-row justify-between text-gray-400",children:[e.jsx("p",{children:"Tax"}),e.jsx("p",{children:"0"})]})]})},q=s=>{const{seller_id:a="",cart_id:t="",status:r="",price:o=0,cart_items:i=[]}=s,l=x(u),{handlePostCreateOrder:n}=k.usePostCreateOrder();return e.jsx("section",{className:"px-8",children:e.jsxs("section",{className:"bg-gray-50 col-span-1 p-4 rounded-xl space-y-10",children:[e.jsxs("section",{className:"mt-4 inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{style:{fontWeight:400},children:"Cart"}),e.jsx("p",{children:"item"})]}),e.jsx(O,{cart_items:i}),e.jsx(D,{price:o}),e.jsxs("section",{className:"inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-normal",children:"Total"}),e.jsxs("p",{className:"text-2xl",children:["$",o]})]}),e.jsxs("button",{className:"w-full py-4 bg-orange-500 rounded-2xl",onClick:h=>{h.preventDefault(),l.status!==c.HAS_VALUE&&r==="prepare"&&n({cart_id:t,price:o,cart_items:i,seller_id:a})},children:[l.status===c.LOADING&&e.jsx(y,{className:"animate-spin",size:24}),l.status===c.HAS_VALUE&&e.jsx(A,{size:24}),l.status===c.IDLE&&e.jsx("p",{className:"text-xl text-white",children:r})]})]})})},I=()=>{const{cartId:s}=g(),{state:a,contents:t}=C(w(s));return console.log(a),console.log(t),e.jsxs("article",{className:"grid grid-cols-3 gap-x-12",children:[a==="loading"&&e.jsx("p",{children:"Loading..."}),a==="hasValue"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{qr:t.data[0].seller.qr}),e.jsx(q,{price:t.data[0].cart.price,cart_id:t.data[0].cart.cart_id,cart_items:t.data[0].cart.cart_items,status:t.data[0].cart.status,seller_id:t.data[0].seller.seller_id})]})]})},z=()=>e.jsxs("main",{className:"container mx-auto mt-28 space-y-12",children:[e.jsx(b,{}),e.jsx(I,{})]});export{z as default};
