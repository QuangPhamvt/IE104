import{j as e,R as x,d as m,I as d,G as p,a as j,W as u,S as c,X as f,Y as y,v as N,H as g,z as C,Z as b,T as w}from"./index-81d40cd2.js";const S=()=>e.jsx("article",{className:"mt-4 p-4 border-b-1 border-solid border-gray-600",children:e.jsx("h2",{className:"font-semibold",children:"Secure Checkout"})}),v=()=>{const s=x(m),{data:{province:l,district:t,ward:r}}=s;return e.jsxs("section",{className:"flex flex-col space-y-8",children:[e.jsxs("h2",{className:"inline-flex space-x-2",children:[e.jsx(d,{size:28,color:"orange"}),e.jsx("p",{className:"font-semibold",children:"Delivery Address"})]}),e.jsxs("section",{className:"p-4 h-32 bg-orange-500 opacity-95 w-2/5 border-1 border-solid rounded-2xl flex flex-col justify-around ",children:[e.jsx(d,{size:28,color:"white"}),e.jsx("p",{className:"text-white font-normal",children:`${l}, ${t}, ${r}`})]})]})},_=s=>{const{qr:l}=s;return l?e.jsx("section",{className:"flex flex-col space-y-8",children:e.jsxs("h2",{className:"inline-flex space-y-4 flex-col",children:[e.jsx("p",{className:"font-semibold",children:"QR Code to payment"}),e.jsx("div",{className:"w-64 aspect-square border-1 border-solid border-black rounded overflow-hidden",children:e.jsx("img",{className:"w-full aspect-square ",src:l.qrDataURL,alt:""})})]})}):null},P=s=>{const{qr:l}=s;return e.jsxs("section",{className:"flex flex-col col-span-2 space-y-8",children:[e.jsx(v,{}),e.jsx(_,{qr:l})]})};function A(s){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20.13 5.41L18.72 4l-9.19 9.19-4.25-4.24-1.41 1.41 5.66 5.66zM5 18h14v2H5z"}}]})(s)}const k=()=>{const s=j(u);return{handlePostCreateOrder:async({seller_id:t,cart_id:r,price:o,cart_items:i=[]})=>{const n=i.map(a=>({product_id:a.product.product_id,quantity:a.quantity}));console.log({seller_id:t,cart_id:r,price:o,products:n});try{s({status:c.LOADING,message:void 0});const a=await f.postCreateOrder({seller_id:t,cart_id:r,price:o,products:n});s({status:c.HAS_VALUE,message:a.data.message})}catch(a){console.error(a.response),s({status:c.HAS_ERROR,message:a})}}}},R={usePostCreateOrder:k},D=s=>{const{price:l,title:t,quantity:r}=s;return e.jsxs("section",{className:"flex flex-col space-y-2 ",children:[e.jsxs("h4",{className:"inline-flex font-light",children:["from ",e.jsx("p",{className:"text-orange-500 ml-2",children:" Lunch Box"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-light",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(N,{})," ",e.jsx("p",{className:"text-gray-400",children:l})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-50 w-24 justify-between",children:[e.jsx("button",{className:"px-4 bg-gray-50",children:" - "}),e.jsx("p",{children:r}),e.jsx("button",{className:"px-4 bg-gray-50",children:" + "})]})]})]})},O=s=>{const{cart_items:l}=s;return e.jsx("section",{className:"flex flex-col space-y-8",children:l.map(t=>e.jsx(D,{price:t.product.price,title:t.product.title,quantity:t.quantity},t.product.product_id))})},I=s=>{const{price:l}=s;return e.jsxs("section",{className:"flex flex-col space-y-4 font-thin",children:[e.jsx("h4",{className:"font-light text-gray-400",children:"Bill details"}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:"Items Total"}),e.jsxs("p",{children:["$",l]})]}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx("p",{children:"0"})]}),e.jsxs("div",{className:"inline-flex w-full flex-row justify-between text-gray-400",children:[e.jsx("p",{children:"Tax"}),e.jsx("p",{children:"0"})]})]})},q=s=>{const{seller_id:l="",cart_id:t="",status:r="",price:o=0,cart_items:i=[]}=s,n=x(u),{handlePostCreateOrder:a}=R.usePostCreateOrder();return e.jsx("section",{className:"px-8",children:e.jsxs("section",{className:"bg-gray-50 col-span-1 p-4 rounded-xl space-y-10",children:[e.jsxs("section",{className:"mt-4 inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{style:{fontWeight:400},children:"Cart"}),e.jsx("p",{children:"item"})]}),e.jsx(O,{cart_items:i}),e.jsx(I,{price:o}),e.jsxs("section",{className:"inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-normal",children:"Total"}),e.jsxs("p",{className:"text-2xl",children:["$",o]})]}),r==="prepare"&&e.jsxs("button",{className:"w-full py-4 bg-gray-100 rounded-2xl border-1 border-solid border-black",onClick:h=>{h.preventDefault(),n.status!==c.HAS_VALUE&&a({cart_id:t,price:o,cart_items:i,seller_id:l})},children:[n.status===c.LOADING&&e.jsx(y,{className:"animate-spin",size:24}),n.status===c.HAS_VALUE&&e.jsx(A,{size:24}),n.status===c.IDLE&&e.jsx("p",{className:"text-xl font-bold text-black",children:"PREPARE"})]}),r==="processing"&&e.jsx("div",{className:"w-full py-4 bg-orange-400 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:"PROCESSING"})}),r==="deny"&&e.jsx("div",{className:"w-full py-4 bg-red-700 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:"DENY"})}),r==="ordered"&&e.jsx("div",{className:"w-full py-4 bg-green-400 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:"ORDERED"})})]})})},E=()=>{const{cartId:s}=g(),{state:l,contents:t}=C(b(s));return console.log(l),console.log(t),e.jsxs("article",{className:"grid grid-cols-3 gap-x-12",children:[l==="loading"&&e.jsx("div",{className:"w-full flex justify-center items-center col-span-3",children:e.jsx(w,{color:"#FFA33C",height:100,width:100})}),l==="hasValue"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{qr:t.data[0].seller.qr}),e.jsx(q,{price:t.data[0].cart.price,cart_id:t.data[0].cart.cart_id,cart_items:t.data[0].cart.cart_items,status:t.data[0].cart.status,seller_id:t.data[0].seller.seller_id})]})]})},z=()=>e.jsxs("main",{className:"container mx-auto mt-28 space-y-12",children:[e.jsx(S,{}),e.jsx(E,{})]});export{z as default};
